(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6b860e6"],{"1d1b":function(e,t,c){e.exports=c.p+"img/close.33571101.svg"},5997:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"bgColor-secondary cart-spep"},n={class:"cus-pt-lg cus-pb-sm"},r={class:"container"},s={class:"row"},l={class:"col-12 col-md-8"},i=Object(a["createElementVNode"])("div",{class:"cart-title"},[Object(a["createElementVNode"])("span",{class:"h2"},"購物車")],-1),d={class:""},p=Object(a["createElementVNode"])("div",{class:"cart-title"},[Object(a["createElementVNode"])("span",{class:"h2"},"加購商品")],-1),m={class:"row row-cols-2 row-cols-lg-4"},b={class:"btn-wrap d-mb-flex d-none justify-content-end cus-mb-lg cus-mt-sm"},u=Object(a["createElementVNode"])("span",null," 確認送出 ",-1),j={class:"col-12 col-sm-6 col-md-4"},O=Object(a["createElementVNode"])("div",{class:"cart-title"},[Object(a["createElementVNode"])("span",{class:"h2"},"訂單資訊")],-1),v={class:"cart-info"},h={class:"info-wrap"},f={class:"info-item"},g=Object(a["createElementVNode"])("span",{class:"h5"},"數量",-1),N={class:"h5"},E={class:"info-item"},V=Object(a["createElementVNode"])("span",{class:"h5"},"小計",-1),w={class:"h5"},C={class:"total-wrap"},y={class:"info-item"},k=Object(a["createElementVNode"])("span",{class:"h5"},"總計",-1),x={class:"h5"},B={class:"btn-wrap d-flex justify-content-end cus-mb-lg cus-mt-sm d-mb-none"},S=Object(a["createElementVNode"])("span",null," 確認送出 ",-1);function $(e,t,c,$,D,F){var I=Object(a["resolveComponent"])("loading"),q=Object(a["resolveComponent"])("ProgressBar"),U=Object(a["resolveComponent"])("cart"),L=Object(a["resolveComponent"])("product"),z=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(I,{active:D.isLoading},null,8,["active"]),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",n,[Object(a["createVNode"])(q,{step:D.step},null,8,["step"])]),Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",l,[i,Object(a["createElementVNode"])("div",d,[Object(a["createVNode"])(U,{"carts-items":D.carts,onUpdateQty:F.getCart,onUpdateItem:F.getCart},null,8,["carts-items","onUpdateQty","onUpdateItem"])]),p,Object(a["createElementVNode"])("div",m,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(D.products,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"col mb-4",key:e.id},[Object(a["createVNode"])(L,{"product-item":e,onToggleFavorite:F.toggleFavorite,favorite:D.favorite},null,8,["product-item","onToggleFavorite","favorite"])])})),128))]),Object(a["createElementVNode"])("div",b,[Object(a["createVNode"])(z,{to:"/Carts/step2",class:"btn btn-primary--fill w-30"},{default:Object(a["withCtx"])((function(){return[u]})),_:1})])]),Object(a["createElementVNode"])("div",j,[O,Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",f,[g,Object(a["createElementVNode"])("span",N,Object(a["toDisplayString"])(D.cartNum),1)]),Object(a["createElementVNode"])("div",E,[V,Object(a["createElementVNode"])("span",w,Object(a["toDisplayString"])(D.total),1)])]),Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("div",y,[k,Object(a["createElementVNode"])("span",x,Object(a["toDisplayString"])(D.total),1)])])]),Object(a["createElementVNode"])("div",B,[Object(a["createVNode"])(z,{to:"/Carts/step2",class:"btn btn-primary--fill w-30"},{default:Object(a["withCtx"])((function(){return[S]})),_:1})])])])])])],64)}c("c740"),c("a434"),c("e9c4"),c("99af"),c("fb6a"),c("d3b7"),c("159b");var D=c("bb30"),F=c("e915"),I=c("b6b4"),q={components:{cart:D["a"],product:F["a"],ProgressBar:I["a"]},data:function(){return{isLoading:!0,products:[],total:0,cartNum:0,carts:[],cart:{},step:1,favorite:JSON.parse(window.localStorage.getItem("toggle-favorite"))||[]}},methods:{toggleFavorite:function(e){var t=this.favorite.findIndex((function(t){return t===e}));-1===t?this.favorite.push(e):this.favorite.splice(t,1),window.localStorage.setItem("toggle-favorite",JSON.stringify(this.favorite))},getProduct:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("himiapi","/products/all")).then((function(t){e.products=t.data.products.slice(0,4)}))},getCart:function(){var e=this;this.cartNum=0,this.total=0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("himiapi","/cart")).then((function(t){e.carts=t.data.data.carts,e.carts.forEach((function(t){e.cartNum+=t.qty,e.total+=t.final_total}))}))}},mounted:function(){var e=this;this.getProduct(),this.getCart(),setTimeout((function(){e.isLoading=!1}),1e3)}},U=c("d959"),L=c.n(U);const z=L()(q,[["render",$]]);t["default"]=z},6160:function(e,t,c){"use strict";c("7bf8")},"7bf8":function(e,t,c){},b6b4:function(e,t,c){"use strict";var a=c("7a23"),o={class:"progress-wrap"},n={class:"progress-item"},r={width:"72",height:"38",viewBox:"0 0 72 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s={class:"progress-item"},l={width:"72",height:"38",viewBox:"0 0 72 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i={class:"progress-item"};function d(e,t,c,d,p,m){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(["mb-0",{"color--text":1===c.step||2===c.step||3===c.step}])}," 1. 購物車 ",2),(Object(a["openBlock"])(),Object(a["createElementBlock"])("svg",r,[Object(a["createElementVNode"])("path",{class:Object(a["normalizeClass"])({"fill-text":1===c.step||2===c.step||3===c.step}),d:"M39.1 0.100098C43.6 5.3001 46 11.7001 46.2 18.1001H0V20.1001H46.2C46 26.5001 43.6 32.7001 39.1 38.0001C48.6 27.0001 62.3 19.1001 71.9 19.1001C62.3 19.0001 48.6 11.1001 39.1 0.100098Z"},null,2)]))]),Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(["mb-0",{"color--text":2===c.step||3===c.step}])}," 2. 填寫資料 ",2),(Object(a["openBlock"])(),Object(a["createElementBlock"])("svg",l,[Object(a["createElementVNode"])("path",{class:Object(a["normalizeClass"])({"fill-text":2===c.step||3===c.step}),d:"M39.1 0.100098C43.6 5.3001 46 11.7001 46.2 18.1001H0V20.1001H46.2C46 26.5001 43.6 32.7001 39.1 38.0001C48.6 27.0001 62.3 19.1001 71.9 19.1001C62.3 19.0001 48.6 11.1001 39.1 0.100098Z"},null,2)]))]),Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(["h4 mb-0",{"color--text":3===c.step}])}," 3. 確認訂單",2)])])}var p={props:["step"]},m=c("d959"),b=c.n(m);const u=b()(p,[["render",d]]);t["a"]=u},bb30:function(e,t,c){"use strict";var a=c("7a23"),o=c("1d1b"),n=c.n(o),r={class:"img-outer me-3"},s={class:"img-wrap"},l=["src","alt"],i={class:"txt-wrap me-3"},d={class:"price-wrap mb-3"},p={class:"me-2"},m={class:"num-select-wrap mb-3"},b=Object(a["createElementVNode"])("span",{class:"me-3"},"數量",-1),u={class:"num-select"},j=["onUpdate:modelValue","onChange"],O=["value"],v=["onClick"],h=Object(a["createElementVNode"])("img",{src:n.a,alt:"關閉"},null,-1),f=[h];function g(e,t,c,o,n,h){return Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.carts,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"cart-card",key:e.product.id},[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("img",{src:e.product.imageUrl,class:"img-fluid",alt:"商品圖片-".concat(t)},null,8,l)])]),Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("h5",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("del",p,"NT$"+Object(a["toDisplayString"])(e.product.origin_price),1),Object(a["createElementVNode"])("span",null,"NT$"+Object(a["toDisplayString"])(e.product.price),1)]),Object(a["createElementVNode"])("div",m,[b,Object(a["createElementVNode"])("div",u,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{name:"",id:"","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return h.updateCart(e.id,e.qty)}},[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(20,(function(e){return Object(a["createElementVNode"])("option",{value:e,key:e},Object(a["toDisplayString"])(e),9,O)})),64))],40,j),[[a["vModelSelect"],e.qty]])])])]),Object(a["createElementVNode"])("button",{type:"button",class:"btn delete",onClick:function(t){return h.delCartItem(e.id)}},f,8,v)])})),128)}c("99af");var N=c("6be2"),E={props:["carts-items"],emits:["update-qty","update-item"],data:function(){return{carts:[],cart:{}}},methods:{getCart:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("himiapi","/cart")).then((function(t){e.carts=e.cartsItems,e.carts=t.data.data.carts}))},delCartItem:function(e){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("himiapi","/cart/").concat(e)).then((function(){t.getCart(),t.$emit("update-item"),N["a"].emit("delete-cart")}))},updateCart:function(e,t){var c=this;this.cart={product_id:e,qty:t},this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("himiapi","/cart/").concat(e),{data:this.cart}).then((function(){c.$emit("update-qty")}))}},mounted:function(){var e=this;this.getCart(),N["a"].on("get-cart",(function(){e.getCart()})),N["a"].on("add-cart",(function(t){e.carts=t,e.getCart()}))}},V=(c("6160"),c("d959")),w=c.n(V);const C=w()(E,[["render",g]]);t["a"]=C},fb6a:function(e,t,c){"use strict";var a=c("23e7"),o=c("da84"),n=c("e8b5"),r=c("68ee"),s=c("861d"),l=c("23cb"),i=c("07fa"),d=c("fc6a"),p=c("8418"),m=c("b622"),b=c("1dde"),u=c("f36a"),j=b("slice"),O=m("species"),v=o.Array,h=Math.max;a({target:"Array",proto:!0,forced:!j},{slice:function(e,t){var c,a,o,m=d(this),b=i(m),j=l(e,b),f=l(void 0===t?b:t,b);if(n(m)&&(c=m.constructor,r(c)&&(c===v||n(c.prototype))?c=void 0:s(c)&&(c=c[O],null===c&&(c=void 0)),c===v||void 0===c))return u(m,j,f);for(a=new(void 0===c?v:c)(h(f-j,0)),o=0;j<f;j++,o++)j in m&&p(a,o,m[j]);return a.length=o,a}})}}]);
//# sourceMappingURL=chunk-c6b860e6.61414591.js.map