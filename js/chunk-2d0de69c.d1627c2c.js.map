{"version":3,"sources":["webpack:///./src/views/frontend/Favorite.vue","webpack:///./src/views/frontend/Favorite.vue?0963"],"names":["class","_createElementVNode","_createVNode","_component_loading","active","$data","length","_createElementBlock","_Fragment","key","_renderList","product","id","_component_product","productItem","onToggleFavorite","$options","favorite","_hoisted_6","_component_P","_component_router_link","to","_hoisted_8","components","data","isLoading","products","pagination","favoriteProducts","JSON","parse","window","localStorage","getItem","watch","handler","this","getFavoriteProducts","deep","methods","filter","item1","some","item2","getProduct","page","$http","get","process","then","res","toggleFavorite","item","favoriteId","findIndex","element","push","splice","setItem","stringify","mounted","__exports__","render"],"mappings":"0IAGOA,MAAM,0B,GACJA,MAAM,a,GACJA,MAAM,8C,SAgBJA,MAAM,iB,GACJA,MAAM,gB,EACTC,gCAAiB,UAAb,YAAQ,G,+BACI,kB,EAEdA,gCAAmB,YAAb,UAAM,G,0RAzBxBC,yBAAuCC,EAAA,CAA7BC,OAAQC,aAAS,mBAE3BJ,gCA6BM,MA7BN,EA6BM,CA5BJA,gCA2BM,MA3BN,EA2BM,CA1BJA,gCAcM,MAdN,EAcM,CAbmC,IAAvBI,mBAAiBC,QAAM,2BACrCC,gCAUMC,cAAA,CAAAC,OAAAC,wBARcL,oBAAgB,SAA3BM,G,gCAFTJ,gCAUM,OATJP,MAAM,WAELS,IAAKE,EAAQC,IAHhB,CAKEV,yBAIWW,EAAA,CAHRC,YAAaH,EACbI,iBAAiBC,iBACjBC,SAAUZ,YAHb,2DALF,+CAamC,GAAvBA,mBAAiBC,QAAM,yBACrCC,gCAQM,MARN,EAQM,CAPJN,gCAMM,MANN,EAMM,CALJiB,EACAhB,yBAAkCiB,EAAA,CAA/BnB,MAAM,QAAM,C,8BAAC,iBAAc,O,MAC9BE,yBAEckB,EAAA,CAFDC,GAAG,YAAYrB,MAAM,mCAAlC,C,8BACE,iBAAmB,CAAnBsB,M,WALN,4CAlBN,I,4EAmCa,GACbC,WAAY,CACVZ,gBAEFa,KAJa,WAKX,MAAO,CACLC,WAAW,EACXC,SAAU,GACVC,WAAY,GACZC,iBAAkB,GAClBX,SACEY,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,qBAAuB,KAGpEC,MAAO,CACLjB,SAAU,CACRkB,QADQ,WAENC,KAAKC,uBAEPC,MAAM,GAERZ,SAPK,WAQHU,KAAKC,wBAGTE,QAAS,CACPF,oBADO,WACe,WACpBD,KAAKR,iBAAmBQ,KAAKV,SAASc,QAAO,SAACC,GAAD,OAC3C,EAAKxB,SAASyB,MAAK,SAACC,GAAD,OAAWF,EAAM7B,KAAO+B,SAG/CC,WANO,WAMc,WAAVC,EAAU,uDAAH,EAChBT,KAAKU,MACFC,IADH,UAEOC,0CAFP,gBAEsCA,UAFtC,2BAEiFH,IAE9EI,MAAK,SAACC,GACL,EAAKxB,SAAWwB,EAAI1B,KAAKE,SACzB,EAAKC,WAAauB,EAAI1B,KAAKG,eAGjCwB,eAhBO,SAgBQC,GACb,IAAMC,EAAajB,KAAKnB,SAASqC,WAAU,SAACC,GAAD,OAAaA,IAAYH,MAChD,IAAhBC,EACFjB,KAAKnB,SAASuC,KAAKJ,GAEnBhB,KAAKnB,SAASwC,OAAOJ,EAAY,GAEnCtB,OAAOC,aAAa0B,QAClB,kBACA7B,KAAK8B,UAAUvB,KAAKnB,aAI1B2C,QAtDa,WAuDXxB,KAAKX,WAAY,EAEjBW,KAAKQ,aACLR,KAAKC,wB,qBC3FT,MAAMwB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0de69c.d1627c2c.js","sourcesContent":["<template>\n  <loading :active=\"isLoading\"></loading>\n\n  <div class=\"mt-navbar-lg cus-mb-lg\">\n    <div class=\"container\">\n      <div class=\"row row-cols-2 row-cols-md-3 row-cols-lg-4\">\n        <template v-if=\"favoriteProducts.length !== 0\">\n          <div\n            class=\"col mb-4\"\n            v-for=\"product in favoriteProducts\"\n            :key=\"product.id\"\n          >\n            <product\n              :productItem=\"product\"\n              @toggle-favorite=\"toggleFavorite\"\n              :favorite=\"favorite\"\n            ></product>\n          </div>\n        </template>\n      </div>\n      <template v-if=\"favoriteProducts.length == 0\">\n        <div class=\"favorite-wrap\">\n          <div class=\"favorite-txt\">\n            <h3>我的最愛沒有東西</h3>\n            <P class=\"mb-4\">快點到商品區挑選喜歡的商品吧</P>\n            <router-link to=\"/Products\" class=\"btn btn-primary--fill w-30 ms-2\">\n              <span> 繼續購物 </span>\n            </router-link>\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport product from \"@/components/ProductCard.vue\";\n\nexport default {\n  components: {\n    product,\n  },\n  data() {\n    return {\n      isLoading: true,\n      products: [],\n      pagination: {},\n      favoriteProducts: [],\n      favorite:\n        JSON.parse(window.localStorage.getItem(\"toggle-favorite\")) || [],\n    };\n  },\n  watch: {\n    favorite: {\n      handler() {\n        this.getFavoriteProducts();\n      },\n      deep: true,\n    },\n    products() {\n      this.getFavoriteProducts();\n    },\n  },\n  methods: {\n    getFavoriteProducts() {\n      this.favoriteProducts = this.products.filter((item1) =>\n        this.favorite.some((item2) => item1.id === item2)\n      );\n    },\n    getProduct(page = 1) {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/products/?page=${page}`\n        )\n        .then((res) => {\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n        });\n    },\n    toggleFavorite(item) {\n      const favoriteId = this.favorite.findIndex((element) => element === item);\n      if (favoriteId === -1) {\n        this.favorite.push(item);\n      } else {\n        this.favorite.splice(favoriteId, 1);\n      }\n      window.localStorage.setItem(\n        \"toggle-favorite\",\n        JSON.stringify(this.favorite)\n      );\n    },\n  },\n  mounted() {\n    this.isLoading = false;\n\n    this.getProduct();\n    this.getFavoriteProducts();\n  },\n};\n</script>\n\n<style lang=\"sass\">\n</style>\n","import { render } from \"./Favorite.vue?vue&type=template&id=3d8eb48c\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/himi/Desktop/練習資料夾/vue/e-commerce/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}